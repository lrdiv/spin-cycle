<div class="container">
  <h1 class="margin-bottom page-title">Settings</h1>
  @if (isPaused()) {
    <div class="alert margin-bottom">
      Recommendations are currently paused. Resume to start receiving new suggestions and emails.
    </div>
  }
  <div class="margin-bottom">
    <label class="toggle">
      <input
        class="toggle__input"
        type="checkbox"
        [checked]="isPaused()"
        (change)="togglePause()"
        [disabled]="togglingPause()"
        aria-label="Pause recommendations"
      />
      <span class="toggle__track" aria-hidden="true"></span>
      <span class="toggle__text">Pause recommendations</span>
    </label>
  </div>

  <form [formGroup]="form" (ngSubmit)="save()">
    <div class="margin-bottom">
      <label for="email-control">Email Address (required)</label>
      <input
        id="email-control"
        type="email"
        placeholder="you@example.com"
        formControlName="email"
        [disabled]="isPaused()"
      />
    </div>

    <div class="margin-bottom">
      <label for="discogs-user-control">Discogs Username</label>
      <input id="discogs-user-control" disabled readonly [value]="settings()?.username" />
    </div>

    <div class="margin-bottom">
      <label for="discogs-folder-control">Folder (required)</label>
      <ng-select
        #folderSelect
        (open)="loadFolders()"
        [clearable]="false"
        [loading]="folderSelect.isOpen && !foldersLoaded()"
        [disabled]="isPaused()"
        [items]="folders()"
        [compareWith]="compareFolders"
        labelForId="discogs-folder-control"
        formControlName="folder"
        bindLabel="name"
      />
    </div>

    <button type="submit" [disabled]="isPaused() || saving() || !form.dirty">Save Settings</button>
  </form>
</div>
